(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const u=[{id:1,video:"video1.mp4"},{id:2,video:"video2.mp4"},{id:3,video:"video3.mp4"},{id:4,video:"video4.mp4"},{id:5,video:"video5.mp4"},{id:6,video:"video6.mp4"},{id:7,video:"video7.mp4"},{id:8,video:"video8.mp4"},{id:9,video:"video9.mp4"},{id:10,video:"video10.mp4"},{id:11,video:"video11.mp4"},{id:12,video:"video12.mp4"},{id:13,video:"video13.mp4"},{id:14,video:"video14.mp4"},{id:15,video:"video15.mp4"},{id:16,video:"video16.mp4"},{id:17,video:"video17.mp4"},{id:18,video:"video18.mp4"},{id:19,video:"video19.mp4"},{id:20,video:"video20.mp4"},{id:21,video:"video21.mp4"},{id:22,video:"video22.mp4"}],s=document.getElementById("marker-info"),a=document.getElementById("cam-error"),l=document.getElementById("mindar-video"),v=document.getElementById("start-button"),p=document.getElementById("start-screen"),m=document.querySelector("a-scene");if(!l||!v||!p||!m)throw console.error("âŒ Elementos esenciales no encontrados en el DOM."),new Error("Faltan elementos esenciales");v.addEventListener("click",()=>{p.style.display="none",navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(r=>(l.srcObject=r,l.play())).then(()=>{console.log("ðŸŽ¥ CÃ¡mara inicializada correctamente."),a&&(a.style.display="none")}).catch(r=>{console.error("âš ï¸ Error al acceder a la cÃ¡mara:",r),a&&(a.style.display="block")})});AFRAME.registerComponent("debug-log",{init(){console.log("âœ… A-Frame entity initialized:",this.el)}});AFRAME.registerComponent("marker-events",{init(){const r=this.el,d=r.getAttribute("mindar-image-target"),o=typeof d=="object"&&(d==null?void 0:d.targetIndex)!==void 0?d.targetIndex:null,n=`video${o!==null?o+1:0}`,e=document.getElementById(n),t=()=>{e&&(e.muted=!0,(e.paused||e.ended)&&e.play().catch(i=>{console.warn(`âš ï¸ No se pudo reproducir ${n}:`,i)}))};r.addEventListener("targetFound",()=>{if(console.log(`ðŸŽ¯ Marcador detectado: targetIndex = ${o}`),s&&(s.textContent="Marcador detectado âœ…"),e){const i=e.parentElement;i.setAttribute("visible","false"),e.load(),e.currentTime=0;const c=()=>{t(),i.setAttribute("visible","true"),e.removeEventListener("canplay",c)};e.readyState>=2?c():e.addEventListener("canplay",c)}}),r.addEventListener("targetLost",()=>{console.log(`ðŸ•³ï¸ Marcador perdido: targetIndex = ${o}`),s&&(s.textContent="Marcador: ---"),e&&e.pause()})}});const f=document.createElement("a-assets");u.forEach(({id:r,video:d})=>{const o=document.createElement("video");o.setAttribute("id",`video${r}`),o.setAttribute("src",`assets/videos/${d}`),o.setAttribute("preload","auto"),o.setAttribute("crossorigin","anonymous"),o.setAttribute("loop",""),o.setAttribute("muted",""),o.setAttribute("playsinline",""),f.appendChild(o)});m.appendChild(f);u.forEach(({id:r,width:d=1,height:o=1.6,position:n="0 0 0",rotation:e="0 0 0"})=>{const t=document.createElement("a-entity");t.setAttribute("mindar-image-target",`targetIndex: ${r-1}`),t.setAttribute("marker-events","");const i=document.createElement("a-video");i.setAttribute("src",`#video${r}`),i.setAttribute("width",d.toString()),i.setAttribute("height",o.toString()),i.setAttribute("position",n),i.setAttribute("rotation",e),t.appendChild(i),m.appendChild(t)});
